version: "3.7"
services:
    wildduck:
        container_name: wildduck
        restart: always
        build: .
        ports:
            - "8080:8080"
            - "143:143"
            - "110:110"
            - "993:993"
            - "995:995"
        depends_on:
            - cache
            - mongo
        volumes:
            - ./data/dbs.toml:/wildduck/config/dbs.toml
            - ./data/api.toml:/wildduck/config/api.toml
    cache:
        image: redis:alpine
        container_name: cache
        volumes:
            - /data
        expose:
            - 6379
    mongo:
        image: mongo
        container_name: mongo
        restart: always
        volumes:
            - /data/db
        expose:
            - 27017